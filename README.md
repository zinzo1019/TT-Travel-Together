-- second_project.country definition

-- Drop table

-- DROP TABLE second_project.country;

CREATE TABLE second_project.country (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
country varchar NOT NULL,
city varchar NOT NULL,
image varchar NULL,
CONSTRAINT country_city_pk PRIMARY KEY (id)
);


-- second_project.tb_user_image definition

-- Drop table

-- DROP TABLE second_project.tb_user_image;

CREATE TABLE second_project.tb_user_image (
"type" varchar NOT NULL,
"name" varchar NOT NULL,
pic_byte bytea NOT NULL,
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
CONSTRAINT tb_user_image_pk PRIMARY KEY (id)
);


-- second_project.travel_product_image definition

-- Drop table

-- DROP TABLE second_project.travel_product_image;

CREATE TABLE second_project.travel_product_image (
"type" varchar NOT NULL,
"name" varchar NOT NULL,
pic_byte bytea NOT NULL,
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
CONSTRAINT travel_product_image_pk PRIMARY KEY (id)
);


-- second_project.travel_tags definition

-- Drop table

-- DROP TABLE second_project.travel_tags;

CREATE TABLE second_project.travel_tags (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
tag varchar NOT NULL,
CONSTRAINT travel_tags_pk PRIMARY KEY (id)
);


-- second_project.tb_user definition

-- Drop table

-- DROP TABLE second_project.tb_user;

CREATE TABLE second_project.tb_user (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
"name" varchar NOT NULL,
email varchar NOT NULL,
"password" varchar NOT NULL,
"role" varchar NULL,
enabled int4 NULL,
image_id int4 NULL,
create_date date NOT NULL,
travel_tag varchar NULL,
CONSTRAINT tb_user_pk PRIMARY KEY (id),
CONSTRAINT tb_user_fk FOREIGN KEY (image_id) REFERENCES second_project.tb_user_image(id) DEFERRABLE INITIALLY DEFERRED
);


-- second_project.travel_product definition

-- Drop table

-- DROP TABLE second_project.travel_product;

CREATE TABLE second_project.travel_product (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
"name" varchar NULL,
description varchar NULL,
tb_user_id int4 NULL,
"cost" int4 NULL,
country_id int4 NULL,
start_date date NULL,
end_date date NULL,
"like" int4 NULL DEFAULT 0,
travel_product_image_id int4 NULL,
CONSTRAINT destination_pk PRIMARY KEY (id),
CONSTRAINT destination_fk_1 FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id),
CONSTRAINT travel_product_fk FOREIGN KEY (country_id) REFERENCES second_project.country(id),
CONSTRAINT "travel_product_fk 2" FOREIGN KEY (travel_product_image_id) REFERENCES second_project.travel_product_image(id)
);


-- second_project.travel_product_comment definition

-- Drop table

-- DROP TABLE second_project.travel_product_comment;

CREATE TABLE second_project.travel_product_comment (
"content" varchar NOT NULL,
tb_user_id int4 NOT NULL,
"like" int4 NULL DEFAULT 0,
travel_product_id int4 NOT NULL,
"level" int4 NULL DEFAULT 0,
create_date date NOT NULL,
update_date date NULL,
parent_comment_id int4 NULL DEFAULT 0,
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
CONSTRAINT travel_product_comment_pk PRIMARY KEY (id),
CONSTRAINT travel_product_comment_fk FOREIGN KEY (travel_product_id) REFERENCES second_project.travel_product(id),
CONSTRAINT travel_product_comment_fk_1 FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id)
);


-- second_project.travel_product_detail definition

-- Drop table

-- DROP TABLE second_project.travel_product_detail;

CREATE TABLE second_project.travel_product_detail (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
description varchar NOT NULL,
travel_product_id int4 NOT NULL,
CONSTRAINT travel_product_detail_pk PRIMARY KEY (id),
CONSTRAINT travel_product_detail_fk FOREIGN KEY (travel_product_id) REFERENCES second_project.travel_product(id)
);


-- second_project.travel_product_tag definition

-- Drop table

-- DROP TABLE second_project.travel_product_tag;

CREATE TABLE second_project.travel_product_tag (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
travel_product_id int4 NOT NULL,
travel_tags_id int4 NULL,
CONSTRAINT travel_product_tag_pk PRIMARY KEY (id),
CONSTRAINT travel_product_tag_fk FOREIGN KEY (travel_product_id) REFERENCES second_project.travel_product(id)
);


-- second_project.travel_together_post definition

-- Drop table

-- DROP TABLE second_project.travel_together_post;

CREATE TABLE second_project.travel_together_post (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
title varchar NOT NULL,
"content" varchar NOT NULL,
start_date date NOT NULL,
end_date date NOT NULL,
create_date date NOT NULL,
update_date date NULL,
country_id int4 NOT NULL,
total_number int4 NOT NULL,
recruited_number int4 NULL DEFAULT 0,
tb_user_id int4 NOT NULL,
deadline date NOT NULL,
enabled bool NULL DEFAULT true,
CONSTRAINT recruiting_board_pk PRIMARY KEY (id),
CONSTRAINT recruiting_member_board_fk FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id),
CONSTRAINT recruiting_member_board_fk_1 FOREIGN KEY (country_id) REFERENCES second_project.country(id)
);


-- second_project.coupon definition

-- Drop table

-- DROP TABLE second_project.coupon;

CREATE TABLE second_project.coupon (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
code varchar NULL,
discount_amount int4 NULL,
discount_percentage int4 NULL,
valid_from date NULL,
valid_to date NULL,
travel_product_id int4 NULL,
tb_user_id int4 NULL,
used bool NULL DEFAULT false,
"name" varchar NOT NULL,
description varchar NULL,
CONSTRAINT counpon_pk PRIMARY KEY (id),
CONSTRAINT coupon_fk FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id),
CONSTRAINT coupon_fk_1 FOREIGN KEY (travel_product_id) REFERENCES second_project.travel_product(id)
);


-- second_project.curious_post definition

-- Drop table

-- DROP TABLE second_project.curious_post;

CREATE TABLE second_project.curious_post (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
title varchar NULL,
"content" varchar NULL,
create_date date NULL,
update_date date NULL,
tb_user_id int4 NULL,
country_id int4 NULL,
CONSTRAINT question_board_pk PRIMARY KEY (id),
CONSTRAINT curious_post_fk FOREIGN KEY (country_id) REFERENCES second_project.country(id),
CONSTRAINT question_board_fk FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id)
);


-- second_project.product_like definition

-- Drop table

-- DROP TABLE second_project.product_like;

CREATE TABLE second_project.product_like (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
travel_product_id int4 NOT NULL,
tb_user_id int4 NOT NULL,
CONSTRAINT product_like_pk PRIMARY KEY (id),
CONSTRAINT product_like_fk FOREIGN KEY (travel_product_id) REFERENCES second_project.travel_product(id),
CONSTRAINT product_like_fk_1 FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id)
);


-- second_project.recruited_member definition

-- Drop table

-- DROP TABLE second_project.recruited_member;

CREATE TABLE second_project.recruited_member (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
tb_user_id int4 NOT NULL,
travel_together_post_id int4 NOT NULL,
CONSTRAINT recruited_member_pk PRIMARY KEY (id),
CONSTRAINT recruited_member_fk FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id),
CONSTRAINT recruited_member_fk_1 FOREIGN KEY (travel_together_post_id) REFERENCES second_project.travel_together_post(id)
);


-- second_project.travel_together_comment definition

-- Drop table

-- DROP TABLE second_project.travel_together_comment;

CREATE TABLE second_project.travel_together_comment (
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
"content" varchar NOT NULL,
tb_user_id int4 NOT NULL,
"like" int4 NOT NULL DEFAULT 0,
travel_together_post_id int4 NOT NULL,
"level" int4 NOT NULL DEFAULT 0,
create_date date NOT NULL,
update_date date NULL,
parent_comment_id int4 NULL DEFAULT 0,
CONSTRAINT travel_together_comment_pk PRIMARY KEY (id),
CONSTRAINT travel_together_comment_fk FOREIGN KEY (travel_together_post_id) REFERENCES second_project.travel_together_post(id),
CONSTRAINT travel_together_comment_fk_1 FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id)
);


-- second_project.curious_comment definition

-- Drop table

-- DROP TABLE second_project.curious_comment;

CREATE TABLE second_project.curious_comment (
"content" varchar NOT NULL,
tb_user_id int4 NOT NULL,
"like" int4 NULL DEFAULT 0,
curious_post_id int4 NOT NULL,
"level" int4 NULL DEFAULT 0,
create_date date NOT NULL,
update_date date NULL,
parent_comment_id int4 NULL,
id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY( INCREMENT BY 1 MINVALUE 1 MAXVALUE 2147483647 START 1 CACHE 1 NO CYCLE),
CONSTRAINT curious_comment_pk PRIMARY KEY (id),
CONSTRAINT curious_comment_fk FOREIGN KEY (curious_post_id) REFERENCES second_project.curious_post(id),
CONSTRAINT "curious_comment_fk 1" FOREIGN KEY (tb_user_id) REFERENCES second_project.tb_user(id)
);